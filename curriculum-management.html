<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SKOLARIS - Curriculum & Course Offerings Management</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-bottom: 2px solid #dee2e6;
        }

        .tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            background: #f8f9fa;
            border: none;
            font-size: 1.1em;
            font-weight: 600;
            color: #495057;
            transition: all 0.3s;
        }

        .tab:hover {
            background: #e9ecef;
        }

        .tab.active {
            background: white;
            color: #667eea;
            border-bottom: 3px solid #667eea;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .action-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-warning {
            background: #ffc107;
            color: #212529;
        }

        .btn-warning:hover {
            background: #e0a800;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 0.875em;
        }

        .search-box {
            display: flex;
            gap: 10px;
            flex: 1;
            max-width: 400px;
        }

        .search-box input {
            flex: 1;
            padding: 10px 15px;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            font-size: 1em;
        }

        .search-box input:focus {
            outline: none;
            border-color: #667eea;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        thead {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        th {
            padding: 15px;
            text-align: left;
            font-weight: 600;
            font-size: 0.95em;
            text-transform: uppercase;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #dee2e6;
        }

        tbody tr:hover {
            background: #f8f9fa;
        }

        tbody tr:last-child td {
            border-bottom: none;
        }

        .badge {
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .badge-active {
            background: #d4edda;
            color: #155724;
        }

        .badge-inactive {
            background: #f8d7da;
            color: #721c24;
        }

        .badge-available {
            background: #d1ecf1;
            color: #0c5460;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            font-size: 1.5em;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.5em;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.3s;
        }

        .close-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        .modal-body {
            padding: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px 15px;
            border: 2px solid #dee2e6;
            border-radius: 6px;
            font-size: 1em;
            font-family: inherit;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .modal-footer {
            padding: 20px 30px;
            background: #f8f9fa;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .info-card {
            background: #e7f3ff;
            border-left: 4px solid #2196f3;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
        }

        .info-card h4 {
            color: #0c5460;
            margin-bottom: 10px;
        }

        .info-card ul {
            margin-left: 20px;
            color: #004085;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .stat-card h3 {
            font-size: 2em;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-card p {
            color: #6c757d;
            font-size: 0.9em;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }

        .empty-state svg {
            width: 100px;
            height: 100px;
            opacity: 0.3;
            margin-bottom: 20px;
        }

        /* Roadmap Styles */
        .roadmap-year {
            margin-bottom: 30px;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
        }

        .roadmap-year-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .roadmap-year-header h3 {
            font-size: 1.5em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .roadmap-year-stats {
            display: flex;
            gap: 20px;
            font-size: 0.9em;
        }

        .roadmap-terms {
            padding: 20px;
        }

        .roadmap-term {
            margin-bottom: 25px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            overflow: hidden;
        }

        .roadmap-term:last-child {
            margin-bottom: 0;
        }

        .roadmap-term-header {
            background: #f8f9fa;
            padding: 15px 20px;
            border-bottom: 2px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .roadmap-term-header h4 {
            color: #495057;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .roadmap-term-info {
            display: flex;
            gap: 15px;
            font-size: 0.85em;
            color: #6c757d;
        }

        .roadmap-subjects {
            padding: 0;
        }

        .roadmap-subject {
            display: grid;
            grid-template-columns: 80px 120px 1fr 100px 150px;
            gap: 15px;
            padding: 15px 20px;
            border-bottom: 1px solid #e9ecef;
            align-items: center;
            transition: background 0.2s;
        }

        .roadmap-subject:hover {
            background: #f8f9fa;
        }

        .roadmap-subject:last-child {
            border-bottom: none;
        }

        .subject-code {
            font-weight: 700;
            color: #667eea;
            font-size: 0.95em;
        }

        .subject-units {
            color: #6c757d;
            font-size: 0.9em;
        }

        .subject-name {
            font-weight: 500;
            color: #212529;
        }

        .subject-prereq {
            font-size: 0.85em;
            color: #6c757d;
            font-style: italic;
        }

        .subject-prereq strong {
            color: #495057;
            font-style: normal;
        }

        .roadmap-summary {
            background: #f8f9fa;
            padding: 15px 20px;
            border-top: 2px solid #dee2e6;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            color: #495057;
        }

        .roadmap-empty {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }

        .roadmap-empty h3 {
            margin-bottom: 10px;
            font-size: 1.5em;
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }
            .tabs, .action-bar, .btn {
                display: none !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üìö Curriculum & Course Offerings Management</h1>
            <p>Manage Default Curriculum Templates and Actual Course Offerings</p>
        </div>

        <!-- Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab('curriculum')">
                üìã Default Curriculum
            </button>
            <button class="tab" onclick="switchTab('roadmap')">
                üó∫Ô∏è Program Roadmap
            </button>
            <button class="tab" onclick="switchTab('offerings')">
                üìñ Course Offerings
            </button>
            <button class="tab" onclick="switchTab('api')">
                üîå API Documentation
            </button>
        </div>

        <!-- DEFAULT CURRICULUM TAB -->
        <div id="curriculum-tab" class="tab-content active">
            <!-- Info Card -->
            <div class="info-card">
                <h4>üìã What is Default Curriculum?</h4>
                <ul>
                    <li><strong>Purpose:</strong> Template showing which subjects students SHOULD take per term/year</li>
                    <li><strong>Scope:</strong> Applies to all students in a program (e.g., BSCS Year 1 1st Sem)</li>
                    <li><strong>Usage:</strong> Used during student enrollment to suggest required subjects</li>
                    <li><strong>Key Fields:</strong> Program, Year Level, Term, Subject, Units, Prerequisites</li>
                </ul>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 6px; margin: 20px 0; border-left: 4px solid #ffc107;">
                <strong style="color: #856404;">üìÖ Curriculum Effectivity Period (Smart Versioning):</strong>
                <ol style="margin: 10px 0 0 20px; padding-left: 0; color: #856404;">
                    <li><strong>No Need to Duplicate:</strong> A subject can be effective for MULTIPLE years (e.g., 2023-Ongoing)</li>
                    <li><strong>Only Create New When Changed:</strong> Only add new version when subject actually changes</li>
                    <li><strong>Effectivity Range:</strong> Start Year ‚Üí End Year (or "Ongoing" if still current)</li>
                    <li><strong>Example:</strong> CS101 (2023-Ongoing) is used by 2023, 2024, 2025 students until it's replaced</li>
                </ol>
                <p style="margin: 10px 0 0 0; color: #856404; font-style: italic;">
                    üí° When you replace CS101 with CS105 in 2026, set CS101 end year to 2025, then create CS105 (2026-Ongoing)!
                </p>
            </div>
            
            <div style="background: #d1ecf1; padding: 15px; border-radius: 6px; margin: 20px 0; border-left: 4px solid #17a2b8;">
                <strong style="color: #0c5460;">üîó Prerequisites Feature:</strong>
                <ol style="margin: 10px 0 0 20px; padding-left: 0; color: #0c5460;">
                    <li><strong>Smart Dropdown:</strong> Prerequisites are now selected from a dropdown (not typed manually)</li>
                    <li><strong>Previous Terms Only:</strong> The dropdown only shows subjects from PREVIOUS terms in the same program</li>
                    <li><strong>Multi-Select:</strong> Hold Ctrl (Windows) or Cmd (Mac) to select multiple prerequisites</li>
                    <li><strong>Example:</strong> If adding a Year 2 1st Sem subject, you can only select prerequisites from Year 1 (both semesters)</li>
                </ol>
                <p style="margin: 10px 0 0 0; color: #0c5460; font-style: italic;">
                    üí° This ensures prerequisites are always from subjects students have already completed!
                </p>
            </div>

            <!-- Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <h3 id="curriculum-count">44</h3>
                    <p>Total Curriculum Records</p>
                </div>
                <div class="stat-card">
                    <h3>4</h3>
                    <p>Programs</p>
                </div>
                <div class="stat-card">
                    <h3>39</h3>
                    <p>Unique Subjects</p>
                </div>
            </div>

            <!-- Action Bar -->
            <div class="action-bar">
                <div class="search-box">
                    <input type="text" id="search-curriculum" placeholder="Search curriculum..." onkeyup="searchTable('curriculum-table')">
                </div>
                <div class="form-group" style="margin: 0; min-width: 250px;">
                    <label for="filter-effectivity" style="margin-bottom: 5px; display: block; font-size: 0.9em;">View Curriculum For Year:</label>
                    <select id="filter-effectivity" onchange="filterByEffectivity()" style="width: 100%; padding: 10px; border: 2px solid #dee2e6; border-radius: 6px;">
                        <option value="all">All Years (Show Everything)</option>
                        <option value="2023">Students Enrolling 2023-2024</option>
                        <option value="2024">Students Enrolling 2024-2025</option>
                        <option value="2025" selected>Students Enrolling 2025-2026</option>
                        <option value="2026">Students Enrolling 2026-2027</option>
                    </select>
                </div>
                <button class="btn btn-primary" onclick="openModal('add-curriculum-modal')">
                    ‚ûï Add Curriculum
                </button>
            </div>

            <!-- Curriculum Table -->
            <table id="curriculum-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Effectivity</th>
                        <th>Program</th>
                        <th>Year/Term</th>
                        <th>Subject</th>
                        <th>Units</th>
                        <th>Prerequisites</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="curriculum-tbody">
                    <!-- Dynamically rendered by JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- PROGRAM ROADMAP TAB -->
        <div id="roadmap-tab" class="tab-content">
            <!-- Info Card -->
            <div class="info-card">
                <h4>üó∫Ô∏è Program Roadmap View</h4>
                <ul>
                    <li><strong>Purpose:</strong> Visual representation of the complete curriculum journey for each program</li>
                    <li><strong>Shows:</strong> All years, terms, and subjects required from start to finish</li>
                    <li><strong>Benefit:</strong> Students can see their entire academic path and plan accordingly</li>
                    <li><strong>View:</strong> Hierarchical display organized by Program ‚Üí Year ‚Üí Term ‚Üí Subjects</li>
                    <li><strong>Version-Specific:</strong> üìÖ Select curriculum version to view different editions (2023, 2024, 2025, etc.)</li>
                </ul>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 6px; margin: 20px 0; border-left: 4px solid #ffc107;">
                <strong style="color: #856404;">üìÖ Curriculum Version Selection:</strong>
                <p style="margin: 10px 0 0 0; color: #856404;">
                    The roadmap shows curriculum for a <strong>specific effectivity year</strong>. Select different versions from the dropdown above to see how the curriculum has changed over time.
                </p>
                <ul style="margin: 10px 0 0 20px; padding-left: 0; color: #856404;">
                    <li><strong>2023-2024:</strong> For students who enrolled in 2023</li>
                    <li><strong>2024-2025:</strong> For students who enrolled in 2024</li>
                    <li><strong>2025-2026 (Current):</strong> For students enrolling now</li>
                </ul>
                <p style="margin: 10px 0 0 0; color: #856404; font-style: italic;">
                    üí° Each student cohort follows their own curriculum version, ensuring changes don't affect them mid-program!
                </p>
            </div>

            <!-- Program Selector -->
            <div class="action-bar">
                <div class="form-group" style="margin: 0; flex: 1; max-width: 300px;">
                    <label for="roadmap-program-filter" style="margin-bottom: 8px; display: block;">Select Program:</label>
                    <select id="roadmap-program-filter" onchange="renderProgramRoadmap()" style="width: 100%; padding: 10px 15px; border: 2px solid #dee2e6; border-radius: 6px; font-size: 1em;">
                        <option value="BSCS">BSCS - Computer Science</option>
                        <option value="BSIT">BSIT - Information Technology</option>
                        <option value="BSIS">BSIS - Information Systems</option>
                        <option value="ACT">ACT - Associate in Computer Technology</option>
                    </select>
                </div>
                <div class="form-group" style="margin: 0; flex: 1; max-width: 300px;">
                    <label for="roadmap-effectivity-filter" style="margin-bottom: 8px; display: block;">For Students Enrolling In:</label>
                    <select id="roadmap-effectivity-filter" onchange="renderProgramRoadmap()" style="width: 100%; padding: 10px 15px; border: 2px solid #dee2e6; border-radius: 6px; font-size: 1em;">
                        <option value="2023">2023-2024</option>
                        <option value="2024">2024-2025</option>
                        <option value="2025" selected>2025-2026 (Current Year)</option>
                        <option value="2026">2026-2027 (Next Year)</option>
                    </select>
                </div>
                <button class="btn btn-primary" onclick="printRoadmap()">
                    üñ®Ô∏è Print Roadmap
                </button>
            </div>

            <!-- Roadmap Container -->
            <div id="roadmap-container"></div>
        </div>

        <!-- COURSE OFFERINGS TAB -->
        <div id="offerings-tab" class="tab-content">
            <!-- Info Card -->
            <div class="info-card">
                <h4>üìñ What are Course Offerings?</h4>
                <ul>
                    <li><strong>Purpose:</strong> Actual courses being offered in a specific term with real faculty, schedule, and slots</li>
                    <li><strong>Scope:</strong> Specific to academic year and term (e.g., 2025-2026 1st Semester)</li>
                    <li><strong>Usage:</strong> Students enroll in these actual class sections</li>
                    <li><strong>Dependency:</strong> üîó Subjects are automatically pulled from Default Curriculum based on selected program, year, and term</li>
                    <li><strong>Key Fields:</strong> Subject, Faculty, Schedule, Room, Capacity, Enrolled, Status</li>
                </ul>
            </div>
            
            <div style="background: #fff3cd; padding: 15px; border-radius: 6px; margin: 20px 0; border-left: 4px solid #ffc107;">
                <strong style="color: #856404;">üîó How Course Offerings Work:</strong>
                <ol style="margin: 10px 0 0 20px; padding-left: 0; color: #856404;">
                    <li><strong>Step 1:</strong> Select Program, Academic Year, Year Level, and Term</li>
                    <li><strong>Step 2:</strong> Subject dropdown will only show subjects from the Default Curriculum for that combination</li>
                    <li><strong>Step 3:</strong> Subject details (code, name, units, prerequisites) are automatically filled</li>
                    <li><strong>Step 4:</strong> Add faculty, schedule, room, and capacity to complete the offering</li>
                </ol>
                <p style="margin: 10px 0 0 0; color: #856404; font-style: italic;">
                    üí° This ensures you can only create offerings for subjects that exist in the curriculum!
                </p>
            </div>

            <!-- Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <h3 id="offerings-count">8</h3>
                    <p>Total Offerings</p>
                </div>
                <div class="stat-card">
                    <h3>3</h3>
                    <p>Faculty Assigned</p>
                </div>
                <div class="stat-card">
                    <h3>240</h3>
                    <p>Total Slots</p>
                </div>
                <div class="stat-card">
                    <h3>185</h3>
                    <p>Enrolled Students</p>
                </div>
            </div>

            <!-- Action Bar -->
            <div class="action-bar">
                <div class="search-box">
                    <input type="text" id="search-offerings" placeholder="Search offerings..." onkeyup="searchTable('offerings-table')">
                </div>
                <button class="btn btn-primary" onclick="openModal('add-offering-modal')">
                    ‚ûï Add Course Offering
                </button>
            </div>

            <!-- Offerings Table -->
            <table id="offerings-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Program</th>
                        <th>Year Level</th>
                        <th>Term</th>
                        <th>Subject</th>
                        <th>Faculty</th>
                        <th>Schedule</th>
                        <th>Room</th>
                        <th>Enrolled/Capacity</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="offerings-tbody">
                    <tr data-id="1">
                        <td>1</td>
                        <td>BSCS</td>
                        <td>Year 1</td>
                        <td>2025-2026 1st Semester</td>
                        <td>CS101 - Intro to Computing</td>
                        <td>Prof. Juan Dela Cruz</td>
                        <td>MWF 8:00-9:00 AM</td>
                        <td>Room 301</td>
                        <td>40/40</td>
                        <td><span class="badge badge-available">Available</span></td>
                        <td>
                            <button class="btn btn-warning btn-sm" onclick="editOffering(1)">‚úèÔ∏è Edit</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteOffering(1)">üóëÔ∏è Delete</button>
                        </td>
                    </tr>
                    <tr data-id="2">
                        <td>2</td>
                        <td>BSCS</td>
                        <td>Year 1</td>
                        <td>2025-2026 1st Semester</td>
                        <td>MATH101 - Calculus I</td>
                        <td>Prof. Maria Santos</td>
                        <td>TTH 10:00-11:30 AM</td>
                        <td>Room 205</td>
                        <td>35/40</td>
                        <td><span class="badge badge-available">Available</span></td>
                        <td>
                            <button class="btn btn-warning btn-sm" onclick="editOffering(2)">‚úèÔ∏è Edit</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteOffering(2)">üóëÔ∏è Delete</button>
                        </td>
                    </tr>
                    <tr data-id="3">
                        <td>3</td>
                        <td>BSCS</td>
                        <td>Year 1</td>
                        <td>2025-2026 1st Semester</td>
                        <td>ENG101 - English I</td>
                        <td>Prof. Pedro Reyes</td>
                        <td>MWF 1:00-2:00 PM</td>
                        <td>Room 102</td>
                        <td>40/40</td>
                        <td><span class="badge badge-inactive">Full</span></td>
                        <td>
                            <button class="btn btn-warning btn-sm" onclick="editOffering(3)">‚úèÔ∏è Edit</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteOffering(3)">üóëÔ∏è Delete</button>
                        </td>
                    </tr>
                    <tr data-id="4">
                        <td>4</td>
                        <td>BSIT</td>
                        <td>Year 1</td>
                        <td>2025-2026 1st Semester</td>
                        <td>IT101 - Intro to IT</td>
                        <td>Prof. Anna Gomez</td>
                        <td>TTH 2:00-3:30 PM</td>
                        <td>Room 401</td>
                        <td>30/40</td>
                        <td><span class="badge badge-available">Available</span></td>
                        <td>
                            <button class="btn btn-warning btn-sm" onclick="editOffering(4)">‚úèÔ∏è Edit</button>
                            <button class="btn btn-danger btn-sm" onclick="deleteOffering(4)">üóëÔ∏è Delete</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- API DOCUMENTATION TAB -->
        <div id="api-tab" class="tab-content">
            <!-- Info Card -->
            <div class="info-card">
                <h4>üîå API Documentation</h4>
                <ul>
                    <li><strong>Purpose:</strong> Complete REST API reference for Curriculum Management System</li>
                    <li><strong>Base URL:</strong> <code>https://api.skolaris.edu/v1</code></li>
                    <li><strong>Authentication:</strong> Bearer Token required in headers</li>
                    <li><strong>Database Sync:</strong> All endpoints align with the database structure from SKOLARIS SIS</li>
                </ul>
            </div>

            <!-- API Sections Navigation -->
            <div style="background: #fff; padding: 20px; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                <h4 style="margin-bottom: 15px; color: #2c3e50;">Quick Navigation</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px;">
                    <a href="#api-default-curriculum" style="padding: 10px; background: #667eea; color: white; text-decoration: none; border-radius: 6px; text-align: center; font-weight: 600;">üìñ Default Curriculum</a>
                    <a href="#api-course-offerings" style="padding: 10px; background: #28a745; color: white; text-decoration: none; border-radius: 6px; text-align: center; font-weight: 600;">üìö Course Offerings</a>
                    <a href="#api-programs" style="padding: 10px; background: #ffc107; color: #212529; text-decoration: none; border-radius: 6px; text-align: center; font-weight: 600;">üéì Programs</a>
                    <a href="#api-subjects" style="padding: 10px; background: #17a2b8; color: white; text-decoration: none; border-radius: 6px; text-align: center; font-weight: 600;">üìù Subjects</a>
                    <a href="#api-terms" style="padding: 10px; background: #6f42c1; color: white; text-decoration: none; border-radius: 6px; text-align: center; font-weight: 600;">üìÖ Academic Terms</a>
                </div>
            </div>

            <!-- Database Structure Reference -->
            <div style="background: #e7f3ff; padding: 20px; border-radius: 10px; margin-bottom: 30px; border-left: 4px solid #2196f3;">
                <h4 style="color: #0c5460; margin-bottom: 15px;">üóÑÔ∏è Database Structure Reference</h4>
                <p style="color: #004085; margin-bottom: 10px;">All API responses and requests follow the exact database schema from SKOLARIS SIS:</p>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 15px;">
                    <div style="background: white; padding: 12px; border-radius: 6px;">
                        <strong style="color: #667eea;">default_curriculum</strong>
                        <div style="font-size: 0.85em; color: #666; margin-top: 5px;">Master curriculum template</div>
                    </div>
                    <div style="background: white; padding: 12px; border-radius: 6px;">
                        <strong style="color: #28a745;">course_offerings</strong>
                        <div style="font-size: 0.85em; color: #666; margin-top: 5px;">Actual course instances</div>
                    </div>
                    <div style="background: white; padding: 12px; border-radius: 6px;">
                        <strong style="color: #ffc107;">programs</strong>
                        <div style="font-size: 0.85em; color: #666; margin-top: 5px;">Academic programs</div>
                    </div>
                    <div style="background: white; padding: 12px; border-radius: 6px;">
                        <strong style="color: #17a2b8;">subjects</strong>
                        <div style="font-size: 0.85em; color: #666; margin-top: 5px;">Subject catalog</div>
                    </div>
                    <div style="background: white; padding: 12px; border-radius: 6px;">
                        <strong style="color: #6f42c1;">academic_terms</strong>
                        <div style="font-size: 0.85em; color: #666; margin-top: 5px;">Term definitions</div>
                    </div>
                </div>
            </div>

            <!-- API Section: Default Curriculum -->
            <div id="api-default-curriculum" class="api-section" style="background: white; padding: 25px; border-radius: 12px; margin-bottom: 25px; box-shadow: 0 3px 15px rgba(0,0,0,0.1); border-left: 5px solid #667eea;">
                <h3 style="color: #667eea; margin-bottom: 20px; font-size: 1.8em;">üìñ Default Curriculum API</h3>
                
                <!-- GET All Curriculum -->
                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #28a745; color: white; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">GET</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/curriculum/default</code>
                    </div>
                    <p style="color: #555; margin-bottom: 15px;"><strong>Description:</strong> Retrieve all default curriculum records with optional filtering</p>
                    
                    <h5 style="color: #2c3e50; margin: 15px 0 10px;">Query Parameters:</h5>
                    <table style="width: 100%; font-size: 0.9em;">
                        <thead style="background: #e9ecef;">
                            <tr>
                                <th style="padding: 10px; text-align: left;">Parameter</th>
                                <th style="padding: 10px; text-align: left;">Type</th>
                                <th style="padding: 10px; text-align: left;">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 10px;"><code>program_id</code></td>
                                <td style="padding: 10px;">Integer</td>
                                <td style="padding: 10px;">Filter by program ID</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px;"><code>year_level</code></td>
                                <td style="padding: 10px;">Integer (1-6)</td>
                                <td style="padding: 10px;">Filter by year level</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px;"><code>semester</code></td>
                                <td style="padding: 10px;">Integer (1-3)</td>
                                <td style="padding: 10px;">Filter by semester</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px;"><code>effectivity_year</code></td>
                                <td style="padding: 10px;">String</td>
                                <td style="padding: 10px;">Filter by effectivity year (e.g., "2025")</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px;"><code>is_active</code></td>
                                <td style="padding: 10px;">Boolean</td>
                                <td style="padding: 10px;">Filter active/inactive records</td>
                            </tr>
                        </tbody>
                    </table>

                    <h5 style="color: #2c3e50; margin: 20px 0 10px;">Example Request:</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>GET /api/curriculum/default?program_id=1&year_level=1&effectivity_year=2025
Authorization: Bearer {token}
Content-Type: application/json</code></pre>

                    <h5 style="color: #2c3e50; margin: 20px 0 10px;">Example Response:</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>{
  "status": "success",
  "data": [
    {
      "default_curriculum_id": 1,
      "program_id": 1,
      "subject_id": 101,
      "year_level": 1,
      "semester": 1,
      "term_type": "1st Semester",
      "subject_type": "Core",
      "is_required": true,
      "prerequisites": "None",
      "co_requisites": null,
      "description": "Introduction to Computer Science fundamentals",
      "effectivity_start_year": "2023",
      "effectivity_end_year": "ongoing",
      "is_active": true,
      "created_at": "2023-01-15T10:00:00Z",
      "updated_at": "2023-01-15T10:00:00Z",
      "subject": {
        "subject_id": 101,
        "subject_code": "CS101",
        "subject_name": "Introduction to Computing",
        "units": 3,
        "type": "lecture"
      },
      "program": {
        "program_id": 1,
        "program_code": "BSCS",
        "program_name": "Bachelor of Science in Computer Science"
      }
    }
  ],
  "total": 1,
  "page": 1,
  "per_page": 50
}</code></pre>
                </div>

                <!-- GET Single Curriculum -->
                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #28a745; color: white; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">GET</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/curriculum/default/{id}</code>
                    </div>
                    <p style="color: #555;"><strong>Description:</strong> Retrieve a specific default curriculum record by ID</p>
                </div>

                <!-- POST Create Curriculum -->
                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #007bff; color: white; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">POST</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/curriculum/default</code>
                    </div>
                    <p style="color: #555; margin-bottom: 15px;"><strong>Description:</strong> Create a new default curriculum record</p>

                    <h5 style="color: #2c3e50; margin: 15px 0 10px;">Request Body:</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>{
  "program_id": 1,
  "subject_id": 101,
  "year_level": 1,
  "semester": 1,
  "term_type": "1st Semester",
  "subject_type": "Core",
  "is_required": true,
  "prerequisites": "None",
  "co_requisites": null,
  "description": "Introduction to Computer Science fundamentals",
  "effectivity_start_year": "2025",
  "effectivity_end_year": "ongoing",
  "is_active": true
}</code></pre>

                    <h5 style="color: #2c3e50; margin: 20px 0 10px;">Example Response:</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>{
  "status": "success",
  "message": "Default curriculum created successfully",
  "data": {
    "default_curriculum_id": 45,
    "program_id": 1,
    "subject_id": 101,
    "year_level": 1,
    "semester": 1,
    "created_at": "2025-10-10T12:00:00Z"
  }
}</code></pre>
                </div>

                <!-- PUT Update Curriculum -->
                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #ffc107; color: #212529; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">PUT</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/curriculum/default/{id}</code>
                    </div>
                    <p style="color: #555;"><strong>Description:</strong> Update an existing default curriculum record</p>
                    
                    <h5 style="color: #2c3e50; margin: 15px 0 10px;">Request Body:</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>{
  "description": "Updated course description",
  "effectivity_end_year": "2026",
  "prerequisites": "CS100",
  "is_active": true
}</code></pre>
                </div>

                <!-- DELETE Curriculum -->
                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #dc3545; color: white; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">DELETE</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/curriculum/default/{id}</code>
                    </div>
                    <p style="color: #555;"><strong>Description:</strong> Delete a default curriculum record (soft delete - sets is_active to false)</p>
                </div>
            </div>

            <!-- API Section: Course Offerings -->
            <div id="api-course-offerings" class="api-section" style="background: white; padding: 25px; border-radius: 12px; margin-bottom: 25px; box-shadow: 0 3px 15px rgba(0,0,0,0.1); border-left: 5px solid #28a745;">
                <h3 style="color: #28a745; margin-bottom: 20px; font-size: 1.8em;">üìö Course Offerings API</h3>

                <!-- GET All Offerings -->
                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #28a745; color: white; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">GET</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/curriculum/offerings</code>
                    </div>
                    <p style="color: #555; margin-bottom: 15px;"><strong>Description:</strong> Retrieve all course offerings with optional filtering</p>

                    <h5 style="color: #2c3e50; margin: 15px 0 10px;">Query Parameters:</h5>
                    <table style="width: 100%; font-size: 0.9em;">
                        <thead style="background: #e9ecef;">
                            <tr>
                                <th style="padding: 10px; text-align: left;">Parameter</th>
                                <th style="padding: 10px; text-align: left;">Type</th>
                                <th style="padding: 10px; text-align: left;">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td style="padding: 10px;"><code>program_id</code></td>
                                <td style="padding: 10px;">Integer</td>
                                <td style="padding: 10px;">Filter by program</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px;"><code>term_id</code></td>
                                <td style="padding: 10px;">Integer</td>
                                <td style="padding: 10px;">Filter by academic term</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px;"><code>faculty_id</code></td>
                                <td style="padding: 10px;">Integer</td>
                                <td style="padding: 10px;">Filter by faculty</td>
                            </tr>
                            <tr>
                                <td style="padding: 10px;"><code>is_available</code></td>
                                <td style="padding: 10px;">Boolean</td>
                                <td style="padding: 10px;">Filter available offerings</td>
                            </tr>
                        </tbody>
                    </table>

                    <h5 style="color: #2c3e50; margin: 20px 0 10px;">Example Response:</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>{
  "status": "success",
  "data": [
    {
      "offering_id": 1,
      "program_id": 1,
      "term_id": 5,
      "subject_id": 101,
      "year_level": 1,
      "semester": 1,
      "subject_type": "Core",
      "max_slots": 40,
      "enrolled_count": 35,
      "faculty_id": 10,
      "is_available": true,
      "is_active": true,
      "created_at": "2025-08-01T08:00:00Z",
      "subject": {
        "subject_code": "CS101",
        "subject_name": "Introduction to Computing",
        "units": 3
      },
      "faculty": {
        "faculty_id": 10,
        "first_name": "Juan",
        "last_name": "Dela Cruz",
        "email": "jdelacruz@skolaris.edu"
      },
      "term": {
        "term_code": "2025-2026-1ST",
        "school_year": "2025-2026",
        "term_type": "1st Semester"
      }
    }
  ],
  "total": 1
}</code></pre>
                </div>

                <!-- POST Create Offering -->
                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #007bff; color: white; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">POST</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/curriculum/offerings</code>
                    </div>
                    <p style="color: #555; margin-bottom: 15px;"><strong>Description:</strong> Create a new course offering</p>

                    <h5 style="color: #2c3e50; margin: 15px 0 10px;">Request Body:</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>{
  "program_id": 1,
  "term_id": 5,
  "subject_id": 101,
  "year_level": 1,
  "semester": 1,
  "subject_type": "Core",
  "max_slots": 40,
  "enrolled_count": 0,
  "faculty_id": 10,
  "is_available": true,
  "is_active": true
}</code></pre>
                </div>

                <!-- PUT Update Offering -->
                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #ffc107; color: #212529; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">PUT</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/curriculum/offerings/{id}</code>
                    </div>
                    <p style="color: #555;"><strong>Description:</strong> Update course offering (e.g., enrollment count, availability)</p>

                    <h5 style="color: #2c3e50; margin: 15px 0 10px;">Request Body:</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>{
  "enrolled_count": 38,
  "is_available": true,
  "faculty_id": 12
}</code></pre>
                </div>

                <!-- DELETE Offering -->
                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #dc3545; color: white; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">DELETE</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/curriculum/offerings/{id}</code>
                    </div>
                    <p style="color: #555;"><strong>Description:</strong> Delete a course offering</p>
                </div>
            </div>

            <!-- API Section: Programs -->
            <div id="api-programs" class="api-section" style="background: white; padding: 25px; border-radius: 12px; margin-bottom: 25px; box-shadow: 0 3px 15px rgba(0,0,0,0.1); border-left: 5px solid #ffc107;">
                <h3 style="color: #d39e00; margin-bottom: 20px; font-size: 1.8em;">üéì Programs API</h3>

                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #28a745; color: white; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">GET</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/programs</code>
                    </div>
                    <p style="color: #555;"><strong>Description:</strong> Get all academic programs</p>

                    <h5 style="color: #2c3e50; margin: 20px 0 10px;">Example Response:</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>{
  "status": "success",
  "data": [
    {
      "program_id": 1,
      "campus_id": 1,
      "college_id": 1,
      "program_code": "BSCS",
      "program_name": "Bachelor of Science in Computer Science",
      "degree_type": "bachelor",
      "duration_years": 4.0,
      "total_units": 192,
      "description": "4-year computer science program",
      "is_active": true,
      "created_at": "2023-01-10T00:00:00Z"
    }
  ]
}</code></pre>
                </div>
            </div>

            <!-- API Section: Subjects -->
            <div id="api-subjects" class="api-section" style="background: white; padding: 25px; border-radius: 12px; margin-bottom: 25px; box-shadow: 0 3px 15px rgba(0,0,0,0.1); border-left: 5px solid #17a2b8;">
                <h3 style="color: #17a2b8; margin-bottom: 20px; font-size: 1.8em;">üìù Subjects API</h3>

                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #28a745; color: white; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">GET</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/subjects</code>
                    </div>
                    <p style="color: #555;"><strong>Description:</strong> Get all subjects in the catalog</p>

                    <h5 style="color: #2c3e50; margin: 20px 0 10px;">Example Response:</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>{
  "status": "success",
  "data": [
    {
      "subject_id": 101,
      "subject_code": "CS101",
      "subject_name": "Introduction to Computing",
      "units": 3,
      "type": "lecture",
      "description": "Fundamentals of computer science",
      "prerequisites": "None",
      "is_active": true,
      "created_at": "2023-01-05T00:00:00Z"
    }
  ]
}</code></pre>
                </div>

                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #007bff; color: white; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">POST</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/subjects</code>
                    </div>
                    <p style="color: #555;"><strong>Description:</strong> Create a new subject</p>

                    <h5 style="color: #2c3e50; margin: 15px 0 10px;">Request Body:</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>{
  "subject_code": "CS102",
  "subject_name": "Programming Fundamentals",
  "units": 3,
  "type": "lecture_lab",
  "description": "Introduction to programming concepts",
  "prerequisites": "CS101",
  "is_active": true
}</code></pre>
                </div>
            </div>

            <!-- API Section: Academic Terms -->
            <div id="api-terms" class="api-section" style="background: white; padding: 25px; border-radius: 12px; margin-bottom: 25px; box-shadow: 0 3px 15px rgba(0,0,0,0.1); border-left: 5px solid #6f42c1;">
                <h3 style="color: #6f42c1; margin-bottom: 20px; font-size: 1.8em;">üìÖ Academic Terms API</h3>

                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #28a745; color: white; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">GET</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/academic-terms</code>
                    </div>
                    <p style="color: #555;"><strong>Description:</strong> Get all academic terms</p>

                    <h5 style="color: #2c3e50; margin: 20px 0 10px;">Example Response:</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>{
  "status": "success",
  "data": [
    {
      "term_id": 5,
      "term_code": "2025-2026-1ST",
      "school_year": "2025-2026",
      "term_type": "1st Semester",
      "term_start_date": "2025-08-15",
      "term_end_date": "2025-12-15",
      "enrollment_start": "2025-07-01",
      "enrollment_end": "2025-08-10",
      "is_active": true,
      "is_current": true,
      "created_at": "2025-05-01T00:00:00Z"
    }
  ]
}</code></pre>
                </div>

                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #007bff; color: white; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">POST</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/academic-terms</code>
                    </div>
                    <p style="color: #555;"><strong>Description:</strong> Create a new academic term</p>

                    <h5 style="color: #2c3e50; margin: 15px 0 10px;">Request Body:</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>{
  "term_code": "2026-2027-1ST",
  "school_year": "2026-2027",
  "term_type": "1st Semester",
  "term_start_date": "2026-08-15",
  "term_end_date": "2026-12-15",
  "enrollment_start": "2026-07-01",
  "enrollment_end": "2026-08-10",
  "is_active": true,
  "is_current": false
}</code></pre>
                </div>
            </div>

            <!-- Error Responses -->
            <div style="background: white; padding: 25px; border-radius: 12px; margin-bottom: 25px; box-shadow: 0 3px 15px rgba(0,0,0,0.1); border-left: 5px solid #dc3545;">
                <h3 style="color: #dc3545; margin-bottom: 20px; font-size: 1.8em;">‚ö†Ô∏è Error Responses</h3>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 15px;">
                    <h5 style="color: #2c3e50; margin-bottom: 10px;">400 Bad Request</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>{
  "status": "error",
  "message": "Validation failed",
  "errors": [
    {
      "field": "program_id",
      "message": "Program ID is required"
    }
  ]
}</code></pre>
                </div>

                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 15px;">
                    <h5 style="color: #2c3e50; margin-bottom: 10px;">401 Unauthorized</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>{
  "status": "error",
  "message": "Authentication token is missing or invalid"
}</code></pre>
                </div>

                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 15px;">
                    <h5 style="color: #2c3e50; margin-bottom: 10px;">404 Not Found</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>{
  "status": "error",
  "message": "Resource not found"
}</code></pre>
                </div>

                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                    <h5 style="color: #2c3e50; margin-bottom: 10px;">500 Internal Server Error</h5>
                    <pre style="background: #2d2d2d; color: #f8f8f2; padding: 15px; border-radius: 6px; overflow-x: auto;"><code>{
  "status": "error",
  "message": "An unexpected error occurred. Please try again later."
}</code></pre>
                </div>
            </div>

            <!-- Additional Endpoints -->
            <div style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 3px 15px rgba(0,0,0,0.1); border-left: 5px solid #6c757d;">
                <h3 style="color: #6c757d; margin-bottom: 20px; font-size: 1.8em;">üîß Special Endpoints</h3>

                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #28a745; color: white; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">GET</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/curriculum/roadmap</code>
                    </div>
                    <p style="color: #555;"><strong>Description:</strong> Get complete program roadmap with all curriculum for a specific program and effectivity year</p>
                    
                    <h5 style="color: #2c3e50; margin: 15px 0 10px;">Query Parameters:</h5>
                    <ul style="margin-left: 20px;">
                        <li><code>program_id</code> (required) - Program ID</li>
                        <li><code>effectivity_year</code> (required) - Effectivity year (e.g., "2025")</li>
                    </ul>
                </div>

                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #28a745; color: white; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">GET</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/curriculum/prerequisites/{subject_id}</code>
                    </div>
                    <p style="color: #555;"><strong>Description:</strong> Get all prerequisite subjects for a given subject</p>
                </div>

                <div class="api-endpoint" style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                    <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 15px;">
                        <span style="background: #007bff; color: white; padding: 6px 12px; border-radius: 4px; font-weight: 600; font-size: 0.9em;">POST</span>
                        <code style="flex: 1; background: white; padding: 10px; border-radius: 4px; font-size: 0.95em;">/api/curriculum/bulk-import</code>
                    </div>
                    <p style="color: #555;"><strong>Description:</strong> Bulk import curriculum from CSV/Excel file</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ADD/EDIT CURRICULUM MODAL -->
    <div id="add-curriculum-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ûï Add/Edit Default Curriculum</h2>
                <button class="close-btn" onclick="closeModal('add-curriculum-modal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="curriculum-form" onsubmit="saveCurriculum(event)">
                    <input type="hidden" id="curriculum-id">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="curriculum-effectivity-start">Effectivity Start Year *</label>
                            <select id="curriculum-effectivity-start" required onchange="updateCurriculumPrerequisites()">
                                <option value="">Select Start Year</option>
                                <option value="2020">2020-2021</option>
                                <option value="2021">2021-2022</option>
                                <option value="2022">2022-2023</option>
                                <option value="2023">2023-2024</option>
                                <option value="2024">2024-2025</option>
                                <option value="2025" selected>2025-2026 (Current)</option>
                                <option value="2026">2026-2027</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="curriculum-effectivity-end">Effectivity End Year</label>
                            <select id="curriculum-effectivity-end">
                                <option value="ongoing" selected>Ongoing (Until Superseded)</option>
                                <option value="2020">2020-2021</option>
                                <option value="2021">2021-2022</option>
                                <option value="2022">2022-2023</option>
                                <option value="2023">2023-2024</option>
                                <option value="2024">2024-2025</option>
                                <option value="2025">2025-2026</option>
                                <option value="2026">2026-2027</option>
                            </select>
                        </div>
                    </div>
                    
                    <div style="background: #e7f3ff; padding: 12px; border-radius: 6px; margin-bottom: 15px; border-left: 3px solid #2196f3;">
                        <small style="color: #004085; font-size: 0.85em;">
                            <strong>üìÖ Effectivity Period:</strong><br>
                            ‚Ä¢ <strong>Start Year:</strong> When this subject becomes effective (e.g., 2025-2026)<br>
                            ‚Ä¢ <strong>End Year:</strong> When it stops being used. Select "Ongoing" if it's still current.<br>
                            ‚Ä¢ <strong>Example:</strong> CS101 (2023-Ongoing) means it's used from 2023 until replaced by a new subject.
                        </small>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="curriculum-program">Program *</label>
                            <select id="curriculum-program" required onchange="updateCurriculumPrerequisites()">
                                <option value="">Select Program</option>
                                <option value="BSCS">BSCS - Computer Science</option>
                                <option value="BSIT">BSIT - Information Technology</option>
                                <option value="BSIS">BSIS - Information Systems</option>
                                <option value="ACT">ACT - Associate in Computer Technology</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="curriculum-year">Year Level *</label>
                            <select id="curriculum-year" required onchange="updateCurriculumPrerequisites()">
                                <option value="">Select Year</option>
                                <option value="1">Year 1</option>
                                <option value="2">Year 2</option>
                                <option value="3">Year 3</option>
                                <option value="4">Year 4</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="curriculum-term">Term *</label>
                            <select id="curriculum-term" required onchange="updateCurriculumPrerequisites()">
                                <option value="">Select Term</option>
                                <option value="1st Semester">1st Semester</option>
                                <option value="2nd Semester">2nd Semester</option>
                                <option value="Summer">Summer</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="curriculum-units">Units *</label>
                            <input type="number" id="curriculum-units" min="1" max="6" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="curriculum-subject-code">Subject Code *</label>
                        <input type="text" id="curriculum-subject-code" placeholder="e.g., CS101" required>
                    </div>

                    <div class="form-group">
                        <label for="curriculum-subject-name">Subject Name *</label>
                        <input type="text" id="curriculum-subject-name" placeholder="e.g., Introduction to Computing" required>
                    </div>

                    <div class="form-group">
                        <label for="curriculum-prerequisites">Prerequisites</label>
                        <select id="curriculum-prerequisites" multiple style="min-height: 120px;">
                            <option value="None">None (No Prerequisites)</option>
                        </select>
                        <small style="color: #6c757d; font-size: 0.85em; display: block; margin-top: 5px;">
                            üìã Hold Ctrl (Windows) or Cmd (Mac) to select multiple subjects. Only subjects from previous terms will appear.
                        </small>
                    </div>

                    <div class="form-group">
                        <label for="curriculum-description">Description</label>
                        <textarea id="curriculum-description" placeholder="Subject description..."></textarea>
                    </div>

                    <div class="form-group">
                        <label for="curriculum-status">Status *</label>
                        <select id="curriculum-status" required>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" onclick="closeModal('add-curriculum-modal')">Cancel</button>
                <button type="submit" form="curriculum-form" class="btn btn-success">üíæ Save Curriculum</button>
            </div>
        </div>
    </div>

    <!-- ADD/EDIT OFFERING MODAL -->
    <div id="add-offering-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ûï Add/Edit Course Offering</h2>
                <button class="close-btn" onclick="closeModal('add-offering-modal')">√ó</button>
            </div>
            <div class="modal-body">
                <form id="offering-form" onsubmit="saveOffering(event)">
                    <input type="hidden" id="offering-id">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="offering-program">Program *</label>
                            <select id="offering-program" required onchange="updateOfferingYearLevels()">
                                <option value="">Select Program</option>
                                <option value="BSCS">BSCS - Computer Science</option>
                                <option value="BSIT">BSIT - Information Technology</option>
                                <option value="BSIS">BSIS - Information Systems</option>
                                <option value="ACT">ACT - Associate in Computer Technology</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="offering-academic-year">Academic Year *</label>
                            <select id="offering-academic-year" required>
                                <option value="">Select Academic Year</option>
                                <option value="2024-2025">2024-2025</option>
                                <option value="2025-2026">2025-2026</option>
                                <option value="2026-2027">2026-2027</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="offering-year-level">Year Level *</label>
                            <select id="offering-year-level" required onchange="updateOfferingSubjects()">
                                <option value="">Select Year Level</option>
                                <option value="1">Year 1</option>
                                <option value="2">Year 2</option>
                                <option value="3">Year 3</option>
                                <option value="4">Year 4</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="offering-term">Term *</label>
                            <select id="offering-term" required onchange="updateOfferingSubjects()">
                                <option value="">Select Term</option>
                                <option value="1st Semester">1st Semester</option>
                                <option value="2nd Semester">2nd Semester</option>
                                <option value="Summer">Summer</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="offering-subject">Subject *</label>
                        <select id="offering-subject" required onchange="fillSubjectDetails()">
                            <option value="">Select subject from curriculum</option>
                        </select>
                        <small style="color: #6c757d; font-size: 0.85em; display: block; margin-top: 5px;">
                            üìã Only subjects from the Default Curriculum for the selected program, year, and term will appear here.
                        </small>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="offering-subject-code">Subject Code (Auto-filled)</label>
                            <input type="text" id="offering-subject-code" readonly style="background: #f8f9fa;">
                        </div>

                        <div class="form-group">
                            <label for="offering-subject-name">Subject Name (Auto-filled)</label>
                            <input type="text" id="offering-subject-name" readonly style="background: #f8f9fa;">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="offering-units">Units (Auto-filled)</label>
                            <input type="text" id="offering-units" readonly style="background: #f8f9fa;">
                        </div>

                        <div class="form-group">
                            <label for="offering-prerequisites">Prerequisites (Auto-filled)</label>
                            <input type="text" id="offering-prerequisites" readonly style="background: #f8f9fa;">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="offering-faculty">Faculty Assigned *</label>
                        <select id="offering-faculty" required>
                            <option value="">Select Faculty</option>
                            <option value="Prof. Juan Dela Cruz">Prof. Juan Dela Cruz</option>
                            <option value="Prof. Maria Santos">Prof. Maria Santos</option>
                            <option value="Prof. Pedro Reyes">Prof. Pedro Reyes</option>
                            <option value="Prof. Anna Gomez">Prof. Anna Gomez</option>
                            <option value="Prof. Carlos Mendoza">Prof. Carlos Mendoza</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="offering-schedule">Schedule *</label>
                            <input type="text" id="offering-schedule" placeholder="e.g., MWF 8:00-9:00 AM" required>
                        </div>

                        <div class="form-group">
                            <label for="offering-room">Room *</label>
                            <input type="text" id="offering-room" placeholder="e.g., Room 301" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="offering-capacity">Capacity *</label>
                            <input type="number" id="offering-capacity" min="1" placeholder="40" required>
                        </div>

                        <div class="form-group">
                            <label for="offering-enrolled">Currently Enrolled</label>
                            <input type="number" id="offering-enrolled" min="0" placeholder="0" value="0">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="offering-status">Status *</label>
                        <select id="offering-status" required>
                            <option value="available">Available</option>
                            <option value="full">Full</option>
                            <option value="closed">Closed</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" onclick="closeModal('add-offering-modal')">Cancel</button>
                <button type="submit" form="offering-form" class="btn btn-success">üíæ Save Offering</button>
            </div>
        </div>
    </div>

    <script>
        // ==================== STATIC DATA ====================
        let curriculumData = [
            // BSCS Year 1 - 1st Semester (Effectivity: 2023-Ongoing)
            { id: 1, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 1, term: '1st Semester', subjectCode: 'CS101', subjectName: 'Introduction to Computing', units: 3, prerequisites: 'None', description: '', status: 'active' },
            { id: 2, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 1, term: '1st Semester', subjectCode: 'MATH101', subjectName: 'Calculus I', units: 3, prerequisites: 'None', description: '', status: 'active' },
            { id: 3, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 1, term: '1st Semester', subjectCode: 'ENG101', subjectName: 'English I', units: 3, prerequisites: 'None', description: '', status: 'active' },
            { id: 4, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 1, term: '1st Semester', subjectCode: 'FIL101', subjectName: 'Filipino I', units: 3, prerequisites: 'None', description: '', status: 'active' },
            { id: 5, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 1, term: '1st Semester', subjectCode: 'PE101', subjectName: 'Physical Education 1', units: 2, prerequisites: 'None', description: '', status: 'active' },
            { id: 6, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 1, term: '1st Semester', subjectCode: 'NSTP101', subjectName: 'NSTP 1', units: 3, prerequisites: 'None', description: '', status: 'active' },
            
            // BSCS Year 1 - 2nd Semester
            { id: 7, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 1, term: '2nd Semester', subjectCode: 'CS102', subjectName: 'Programming Fundamentals', units: 3, prerequisites: 'CS101', description: '', status: 'active' },
            { id: 8, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 1, term: '2nd Semester', subjectCode: 'MATH102', subjectName: 'Calculus II', units: 3, prerequisites: 'MATH101', description: '', status: 'active' },
            { id: 9, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 1, term: '2nd Semester', subjectCode: 'ENG102', subjectName: 'English II', units: 3, prerequisites: 'ENG101', description: '', status: 'active' },
            { id: 10, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 1, term: '2nd Semester', subjectCode: 'FIL102', subjectName: 'Filipino II', units: 3, prerequisites: 'FIL101', description: '', status: 'active' },
            { id: 11, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 1, term: '2nd Semester', subjectCode: 'PE102', subjectName: 'Physical Education 2', units: 2, prerequisites: 'PE101', description: '', status: 'active' },
            { id: 12, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 1, term: '2nd Semester', subjectCode: 'NSTP102', subjectName: 'NSTP 2', units: 3, prerequisites: 'NSTP101', description: '', status: 'active' },
            
            // BSCS Year 2 - 1st Semester
            { id: 13, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 2, term: '1st Semester', subjectCode: 'CS201', subjectName: 'Data Structures', units: 3, prerequisites: 'CS102', description: '', status: 'active' },
            { id: 14, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 2, term: '1st Semester', subjectCode: 'CS202', subjectName: 'Object-Oriented Programming', units: 3, prerequisites: 'CS102', description: '', status: 'active' },
            { id: 15, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 2, term: '1st Semester', subjectCode: 'MATH201', subjectName: 'Discrete Mathematics', units: 3, prerequisites: 'MATH102', description: '', status: 'active' },
            { id: 16, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 2, term: '1st Semester', subjectCode: 'PHYS101', subjectName: 'Physics for CS', units: 3, prerequisites: 'MATH101', description: '', status: 'active' },
            { id: 17, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 2, term: '1st Semester', subjectCode: 'HUM101', subjectName: 'Humanities Elective', units: 3, prerequisites: 'None', description: '', status: 'active' },
            
            // BSCS Year 2 - 2nd Semester
            { id: 18, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 2, term: '2nd Semester', subjectCode: 'CS203', subjectName: 'Algorithms', units: 3, prerequisites: 'CS201', description: '', status: 'active' },
            { id: 19, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 2, term: '2nd Semester', subjectCode: 'CS204', subjectName: 'Database Management Systems', units: 3, prerequisites: 'CS201', description: '', status: 'active' },
            { id: 20, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 2, term: '2nd Semester', subjectCode: 'CS205', subjectName: 'Computer Architecture', units: 3, prerequisites: 'CS101', description: '', status: 'active' },
            { id: 21, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 2, term: '2nd Semester', subjectCode: 'MATH202', subjectName: 'Linear Algebra', units: 3, prerequisites: 'MATH102', description: '', status: 'active' },
            { id: 22, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 2, term: '2nd Semester', subjectCode: 'SOC101', subjectName: 'Social Science Elective', units: 3, prerequisites: 'None', description: '', status: 'active' },
            
            // BSCS Year 3 - 1st Semester
            { id: 23, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 3, term: '1st Semester', subjectCode: 'CS301', subjectName: 'Software Engineering', units: 3, prerequisites: 'CS203', description: '', status: 'active' },
            { id: 24, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 3, term: '1st Semester', subjectCode: 'CS302', subjectName: 'Operating Systems', units: 3, prerequisites: 'CS205', description: '', status: 'active' },
            { id: 25, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 3, term: '1st Semester', subjectCode: 'CS303', subjectName: 'Web Development', units: 3, prerequisites: 'CS204', description: '', status: 'active' },
            { id: 26, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 3, term: '1st Semester', subjectCode: 'CS304', subjectName: 'Theory of Computation', units: 3, prerequisites: 'MATH201', description: '', status: 'active' },
            { id: 27, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 3, term: '1st Semester', subjectCode: 'ELEC301', subjectName: 'CS Elective 1', units: 3, prerequisites: 'None', description: '', status: 'active' },
            
            // BSCS Year 3 - 2nd Semester
            { id: 28, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 3, term: '2nd Semester', subjectCode: 'CS305', subjectName: 'Computer Networks', units: 3, prerequisites: 'CS302', description: '', status: 'active' },
            { id: 29, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 3, term: '2nd Semester', subjectCode: 'CS306', subjectName: 'Artificial Intelligence', units: 3, prerequisites: 'CS203', description: '', status: 'active' },
            { id: 30, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 3, term: '2nd Semester', subjectCode: 'CS307', subjectName: 'Information Security', units: 3, prerequisites: 'CS305', description: '', status: 'active' },
            { id: 31, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 3, term: '2nd Semester', subjectCode: 'CS308', subjectName: 'Mobile App Development', units: 3, prerequisites: 'CS303', description: '', status: 'active' },
            { id: 32, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 3, term: '2nd Semester', subjectCode: 'ELEC302', subjectName: 'CS Elective 2', units: 3, prerequisites: 'None', description: '', status: 'active' },
            
            // BSCS Year 4 - 1st Semester
            { id: 33, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 4, term: '1st Semester', subjectCode: 'CS401', subjectName: 'Capstone Project 1', units: 3, prerequisites: 'CS301', description: '', status: 'active' },
            { id: 34, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 4, term: '1st Semester', subjectCode: 'CS402', subjectName: 'Machine Learning', units: 3, prerequisites: 'CS306', description: '', status: 'active' },
            { id: 35, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 4, term: '1st Semester', subjectCode: 'CS403', subjectName: 'Cloud Computing', units: 3, prerequisites: 'CS305', description: '', status: 'active' },
            { id: 36, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 4, term: '1st Semester', subjectCode: 'ELEC401', subjectName: 'CS Elective 3', units: 3, prerequisites: 'None', description: '', status: 'active' },
            
            // BSCS Year 4 - 2nd Semester
            { id: 37, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 4, term: '2nd Semester', subjectCode: 'CS404', subjectName: 'Capstone Project 2', units: 3, prerequisites: 'CS401', description: '', status: 'active' },
            { id: 38, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 4, term: '2nd Semester', subjectCode: 'CS405', subjectName: 'Professional Ethics', units: 3, prerequisites: 'None', description: '', status: 'active' },
            { id: 39, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', year: 4, term: '2nd Semester', subjectCode: 'CS499', subjectName: 'Practicum/OJT', units: 6, prerequisites: 'CS401', description: '', status: 'active' },
            
            // BSIT Year 1 - 1st Semester
            { id: 40, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSIT', year: 1, term: '1st Semester', subjectCode: 'IT101', subjectName: 'Introduction to Information Technology', units: 3, prerequisites: 'None', description: '', status: 'active' },
            { id: 41, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSIT', year: 1, term: '1st Semester', subjectCode: 'MATH101', subjectName: 'College Algebra', units: 3, prerequisites: 'None', description: '', status: 'active' },
            { id: 42, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSIT', year: 1, term: '1st Semester', subjectCode: 'ENG101', subjectName: 'English I', units: 3, prerequisites: 'None', description: '', status: 'active' },
            { id: 43, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSIT', year: 1, term: '1st Semester', subjectCode: 'FIL101', subjectName: 'Filipino I', units: 3, prerequisites: 'None', description: '', status: 'active' },
            { id: 44, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSIT', year: 1, term: '1st Semester', subjectCode: 'PE101', subjectName: 'Physical Education 1', units: 2, prerequisites: 'None', description: '', status: 'active' }
        ];

        let offeringsData = [
            { id: 1, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', yearLevel: 1, term: '2025-2026 1st Semester', subjectCode: 'CS101', subjectName: 'Intro to Computing', faculty: 'Prof. Juan Dela Cruz', schedule: 'MWF 8:00-9:00 AM', room: 'Room 301', capacity: 40, enrolled: 40, status: 'available' },
            { id: 2, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', yearLevel: 1, term: '2025-2026 1st Semester', subjectCode: 'MATH101', subjectName: 'Calculus I', faculty: 'Prof. Maria Santos', schedule: 'TTH 10:00-11:30 AM', room: 'Room 205', capacity: 40, enrolled: 35, status: 'available' },
            { id: 3, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSCS', yearLevel: 1, term: '2025-2026 1st Semester', subjectCode: 'ENG101', subjectName: 'English I', faculty: 'Prof. Pedro Reyes', schedule: 'MWF 1:00-2:00 PM', room: 'Room 102', capacity: 40, enrolled: 40, status: 'full' },
            { id: 4, effectivityStart: '2023', effectivityEnd: 'ongoing', program: 'BSIT', yearLevel: 1, term: '2025-2026 1st Semester', subjectCode: 'IT101', subjectName: 'Intro to IT', faculty: 'Prof. Anna Gomez', schedule: 'TTH 2:00-3:30 PM', room: 'Room 401', capacity: 40, enrolled: 30, status: 'available' }
        ];

        let currentEditId = null;
        let editMode = false;

        // ==================== TAB SWITCHING ====================
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName + '-tab').classList.add('active');
        }

        // ==================== MODAL FUNCTIONS ====================
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            editMode = false;
            currentEditId = null;
            
            // Reset form
            if (modalId === 'add-curriculum-modal') {
                document.getElementById('curriculum-form').reset();
                document.getElementById('curriculum-id').value = '';
            } else if (modalId === 'add-offering-modal') {
                document.getElementById('offering-form').reset();
                document.getElementById('offering-id').value = '';
                document.getElementById('offering-subject').innerHTML = '<option value="">Select subject from curriculum</option>';
                clearSubjectDetails();
            }
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.classList.remove('active');
            }
        }

        // ==================== CURRICULUM PREREQUISITE FUNCTIONS ====================
        function updateCurriculumPrerequisites() {
            const program = document.getElementById('curriculum-program').value;
            const year = parseInt(document.getElementById('curriculum-year').value);
            const term = document.getElementById('curriculum-term').value;
            const effectivityStart = document.getElementById('curriculum-effectivity-start').value;
            const prereqSelect = document.getElementById('curriculum-prerequisites');
            
            // Clear and add "None" option
            prereqSelect.innerHTML = '<option value="None">None (No Prerequisites)</option>';
            
            // Only populate if all required fields are selected
            if (!program || !year || !term) {
                return;
            }
            
            // Determine which terms are "previous" to the selected term
            const previousSubjects = [];
            
            // Get all subjects from the same program that are effective for the selected year and are before this term
            curriculumData.forEach(subject => {
                if (subject.program !== program || 
                    subject.status !== 'active' || 
                    (effectivityStart && !isEffectiveForYear(subject, effectivityStart))) return;
                
                const subjectYear = parseInt(subject.year);
                const subjectTerm = subject.term;
                
                // Check if this subject is from a previous term
                let isPrevious = false;
                
                if (subjectYear < year) {
                    // Any subject from earlier years
                    isPrevious = true;
                } else if (subjectYear === year) {
                    // Same year - check term order
                    const termOrder = ['1st Semester', '2nd Semester', 'Summer'];
                    const currentTermIndex = termOrder.indexOf(term);
                    const subjectTermIndex = termOrder.indexOf(subjectTerm);
                    
                    if (subjectTermIndex < currentTermIndex && subjectTermIndex !== -1) {
                        isPrevious = true;
                    }
                }
                
                if (isPrevious) {
                    previousSubjects.push(subject);
                }
            });
            
            // Sort by year and term for better display
            previousSubjects.sort((a, b) => {
                if (a.year !== b.year) return a.year - b.year;
                
                const termOrder = ['1st Semester', '2nd Semester', 'Summer'];
                return termOrder.indexOf(a.term) - termOrder.indexOf(b.term);
            });
            
            // Add subjects to dropdown
            if (previousSubjects.length === 0) {
                const option = document.createElement('option');
                option.value = 'None';
                option.textContent = '(No previous subjects available)';
                option.disabled = true;
                prereqSelect.appendChild(option);
            } else {
                previousSubjects.forEach(subject => {
                    const option = document.createElement('option');
                    option.value = subject.subjectCode;
                    option.textContent = `${subject.subjectCode} - ${subject.subjectName} (Year ${subject.year} ${subject.term})`;
                    prereqSelect.appendChild(option);
                });
            }
        }

        // ==================== CURRICULUM CRUD ====================
        function saveCurriculum(event) {
            event.preventDefault();
            
            // Get selected prerequisites
            const prereqSelect = document.getElementById('curriculum-prerequisites');
            const selectedPrereqs = Array.from(prereqSelect.selectedOptions).map(opt => opt.value);
            let prerequisites = 'None';
            
            if (selectedPrereqs.length > 0 && !selectedPrereqs.includes('None')) {
                prerequisites = selectedPrereqs.join(', ');
            }
            
            const formData = {
                effectivityStart: document.getElementById('curriculum-effectivity-start').value,
                effectivityEnd: document.getElementById('curriculum-effectivity-end').value,
                program: document.getElementById('curriculum-program').value,
                year: document.getElementById('curriculum-year').value,
                term: document.getElementById('curriculum-term').value,
                subjectCode: document.getElementById('curriculum-subject-code').value,
                subjectName: document.getElementById('curriculum-subject-name').value,
                units: parseInt(document.getElementById('curriculum-units').value),
                prerequisites: prerequisites,
                description: document.getElementById('curriculum-description').value,
                status: document.getElementById('curriculum-status').value
            };

            if (editMode && currentEditId) {
                // Update existing
                const index = curriculumData.findIndex(c => c.id === currentEditId);
                curriculumData[index] = { ...curriculumData[index], ...formData };
                showNotification('‚úÖ Curriculum updated successfully!', 'success');
            } else {
                // Add new
                const newId = Math.max(...curriculumData.map(c => c.id)) + 1;
                curriculumData.push({ id: newId, ...formData });
                showNotification('‚úÖ Curriculum added successfully!', 'success');
            }

            renderCurriculumTable();
            closeModal('add-curriculum-modal');
        }

        function editCurriculum(id) {
            const curriculum = curriculumData.find(c => c.id === id);
            if (!curriculum) return;

            editMode = true;
            currentEditId = id;

            document.getElementById('curriculum-id').value = curriculum.id;
            document.getElementById('curriculum-effectivity-start').value = curriculum.effectivityStart || '2025';
            document.getElementById('curriculum-effectivity-end').value = curriculum.effectivityEnd || 'ongoing';
            document.getElementById('curriculum-program').value = curriculum.program;
            document.getElementById('curriculum-year').value = curriculum.year;
            document.getElementById('curriculum-term').value = curriculum.term;
            document.getElementById('curriculum-subject-code').value = curriculum.subjectCode;
            document.getElementById('curriculum-subject-name').value = curriculum.subjectName;
            document.getElementById('curriculum-units').value = curriculum.units;
            document.getElementById('curriculum-description').value = curriculum.description || '';
            document.getElementById('curriculum-status').value = curriculum.status;

            // Update prerequisites dropdown based on program/year/term
            updateCurriculumPrerequisites();
            
            // Wait for dropdown to populate, then select the saved prerequisites
            setTimeout(() => {
                const prereqSelect = document.getElementById('curriculum-prerequisites');
                const savedPrereqs = curriculum.prerequisites.split(',').map(p => p.trim());
                
                // Clear all selections first
                Array.from(prereqSelect.options).forEach(opt => opt.selected = false);
                
                // Select matching options
                Array.from(prereqSelect.options).forEach(opt => {
                    if (savedPrereqs.includes(opt.value)) {
                        opt.selected = true;
                    }
                });
            }, 100);

            openModal('add-curriculum-modal');
        }

        function deleteCurriculum(id) {
            if (confirm('Are you sure you want to delete this curriculum?')) {
                curriculumData = curriculumData.filter(c => c.id !== id);
                renderCurriculumTable();
                showNotification('üóëÔ∏è Curriculum deleted successfully!', 'success');
            }
        }

        function renderCurriculumTable(dataToRender = null) {
            const tbody = document.getElementById('curriculum-tbody');
            tbody.innerHTML = '';
            
            const data = dataToRender || curriculumData;

            data.forEach(curriculum => {
                const row = document.createElement('tr');
                row.dataset.id = curriculum.id;
                
                // Format effectivity range
                const startYear = curriculum.effectivityStart || '2023';
                const endYear = curriculum.effectivityEnd || 'ongoing';
                const effectivityDisplay = endYear === 'ongoing' ? 
                    `${startYear}-Ongoing` : 
                    `${startYear}-${endYear}`;
                
                const effectivityBadge = endYear === 'ongoing' ? 
                    `<span class="badge badge-active">${effectivityDisplay}</span>` : 
                    `<span class="badge" style="background: #6c757d; color: white;">${effectivityDisplay}</span>`;
                
                row.innerHTML = `
                    <td>${curriculum.id}</td>
                    <td>${effectivityBadge}</td>
                    <td>${curriculum.program}</td>
                    <td>Year ${curriculum.year} - ${curriculum.term}</td>
                    <td>${curriculum.subjectCode} - ${curriculum.subjectName}</td>
                    <td>${curriculum.units}</td>
                    <td>${curriculum.prerequisites}</td>
                    <td><span class="badge badge-${curriculum.status === 'active' ? 'active' : 'inactive'}">${curriculum.status === 'active' ? 'Active' : 'Inactive'}</span></td>
                    <td>
                        <button class="btn btn-warning btn-sm" onclick="editCurriculum(${curriculum.id})">‚úèÔ∏è Edit</button>
                        <button class="btn btn-danger btn-sm" onclick="deleteCurriculum(${curriculum.id})">üóëÔ∏è Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });

            document.getElementById('curriculum-count').textContent = data.length;
        }

        // ==================== CURRICULUM FILTERING ====================
        function filterByEffectivity() {
            const selectedYear = document.getElementById('filter-effectivity').value;
            
            if (selectedYear === 'all') {
                renderCurriculumTable();
            } else {
                // Filter subjects that are effective for the selected year
                const filtered = curriculumData.filter(c => {
                    const startYear = parseInt(c.effectivityStart);
                    const endYear = c.effectivityEnd === 'ongoing' ? 9999 : parseInt(c.effectivityEnd);
                    const year = parseInt(selectedYear);
                    
                    return year >= startYear && year <= endYear;
                });
                renderCurriculumTable(filtered);
            }
        }
        
        // Helper function to check if curriculum is effective for a given year
        function isEffectiveForYear(curriculum, year) {
            const startYear = parseInt(curriculum.effectivityStart);
            const endYear = curriculum.effectivityEnd === 'ongoing' ? 9999 : parseInt(curriculum.effectivityEnd);
            const checkYear = parseInt(year);
            
            return checkYear >= startYear && checkYear <= endYear;
        }

        // ==================== OFFERINGS DEPENDENCY FUNCTIONS ====================
        function updateOfferingYearLevels() {
            const program = document.getElementById('offering-program').value;
            const yearSelect = document.getElementById('offering-year-level');
            
            // Enable year level dropdown if program is selected
            yearSelect.disabled = !program;
            
            // Reset subsequent dropdowns
            document.getElementById('offering-term').value = '';
            document.getElementById('offering-subject').innerHTML = '<option value="">Select subject from curriculum</option>';
            clearSubjectDetails();
        }

        function updateOfferingSubjects() {
            const program = document.getElementById('offering-program').value;
            const year = document.getElementById('offering-year-level').value;
            const term = document.getElementById('offering-term').value;
            const subjectSelect = document.getElementById('offering-subject');
            
            // Clear subject dropdown
            subjectSelect.innerHTML = '<option value="">Select subject from curriculum</option>';
            clearSubjectDetails();
            
            // If all fields are selected, populate subjects
            if (program && year && term) {
                // Filter curriculum by program, year, and term
                const availableSubjects = curriculumData.filter(c => 
                    c.program === program && 
                    c.year == year && 
                    c.term === term &&
                    c.status === 'active'
                );
                
                if (availableSubjects.length === 0) {
                    subjectSelect.innerHTML = '<option value="">No subjects found for this combination</option>';
                    showNotification('‚ö†Ô∏è No subjects in curriculum for this program, year, and term', 'error');
                } else {
                    availableSubjects.forEach(subject => {
                        const option = document.createElement('option');
                        option.value = subject.id;
                        option.textContent = `${subject.subjectCode} - ${subject.subjectName} (${subject.units} units)`;
                        subjectSelect.appendChild(option);
                    });
                }
            }
        }

        function fillSubjectDetails() {
            const subjectId = document.getElementById('offering-subject').value;
            
            if (subjectId) {
                const subject = curriculumData.find(c => c.id == subjectId);
                
                if (subject) {
                    document.getElementById('offering-subject-code').value = subject.subjectCode;
                    document.getElementById('offering-subject-name').value = subject.subjectName;
                    document.getElementById('offering-units').value = subject.units + ' unit(s)';
                    document.getElementById('offering-prerequisites').value = subject.prerequisites;
                }
            } else {
                clearSubjectDetails();
            }
        }

        function clearSubjectDetails() {
            document.getElementById('offering-subject-code').value = '';
            document.getElementById('offering-subject-name').value = '';
            document.getElementById('offering-units').value = '';
            document.getElementById('offering-prerequisites').value = '';
        }

        // ==================== OFFERINGS CRUD ====================
        function saveOffering(event) {
            event.preventDefault();
            
            const academicYear = document.getElementById('offering-academic-year').value;
            const term = document.getElementById('offering-term').value;
            const fullTerm = `${academicYear} ${term}`;
            
            const formData = {
                program: document.getElementById('offering-program').value,
                yearLevel: document.getElementById('offering-year-level').value,
                term: fullTerm,
                subjectCode: document.getElementById('offering-subject-code').value,
                subjectName: document.getElementById('offering-subject-name').value,
                faculty: document.getElementById('offering-faculty').value,
                schedule: document.getElementById('offering-schedule').value,
                room: document.getElementById('offering-room').value,
                capacity: parseInt(document.getElementById('offering-capacity').value),
                enrolled: parseInt(document.getElementById('offering-enrolled').value),
                status: document.getElementById('offering-status').value
            };

            if (editMode && currentEditId) {
                // Update existing
                const index = offeringsData.findIndex(o => o.id === currentEditId);
                offeringsData[index] = { ...offeringsData[index], ...formData };
                showNotification('‚úÖ Course offering updated successfully!', 'success');
            } else {
                // Add new
                const newId = Math.max(...offeringsData.map(o => o.id)) + 1;
                offeringsData.push({ id: newId, ...formData });
                showNotification('‚úÖ Course offering added successfully!', 'success');
            }

            renderOfferingsTable();
            closeModal('add-offering-modal');
        }

        function editOffering(id) {
            const offering = offeringsData.find(o => o.id === id);
            if (!offering) return;

            editMode = true;
            currentEditId = id;

            // Parse the term to extract academic year and semester
            const termParts = offering.term.split(' ');
            const academicYear = termParts[0]; // e.g., "2025-2026"
            const semester = termParts.slice(1).join(' '); // e.g., "1st Semester" or "1st Sem"
            
            // Normalize semester name
            let normalizedSemester = semester;
            if (semester.includes('1st')) normalizedSemester = '1st Semester';
            else if (semester.includes('2nd')) normalizedSemester = '2nd Semester';
            else if (semester.toLowerCase().includes('summer')) normalizedSemester = 'Summer';

            document.getElementById('offering-id').value = offering.id;
            document.getElementById('offering-program').value = offering.program;
            document.getElementById('offering-academic-year').value = academicYear;
            document.getElementById('offering-year-level').value = offering.yearLevel || '1';
            document.getElementById('offering-term').value = normalizedSemester;
            
            // Trigger subject population
            updateOfferingSubjects();
            
            // Wait for subjects to populate, then select the current subject
            setTimeout(() => {
                // Find the curriculum entry that matches the subject
                const curriculumEntry = curriculumData.find(c => 
                    c.subjectCode === offering.subjectCode && 
                    c.program === offering.program
                );
                
                if (curriculumEntry) {
                    document.getElementById('offering-subject').value = curriculumEntry.id;
                    fillSubjectDetails();
                }
                
                // Fill other fields
                document.getElementById('offering-faculty').value = offering.faculty;
                document.getElementById('offering-schedule').value = offering.schedule;
                document.getElementById('offering-room').value = offering.room;
                document.getElementById('offering-capacity').value = offering.capacity;
                document.getElementById('offering-enrolled').value = offering.enrolled;
                document.getElementById('offering-status').value = offering.status;
            }, 100);

            openModal('add-offering-modal');
        }

        function deleteOffering(id) {
            if (confirm('Are you sure you want to delete this course offering?')) {
                offeringsData = offeringsData.filter(o => o.id !== id);
                renderOfferingsTable();
                showNotification('üóëÔ∏è Course offering deleted successfully!', 'success');
            }
        }

        function renderOfferingsTable() {
            const tbody = document.getElementById('offerings-tbody');
            tbody.innerHTML = '';

            offeringsData.forEach(offering => {
                const row = document.createElement('tr');
                row.dataset.id = offering.id;
                const statusBadge = offering.status === 'full' ? 'badge-inactive' : 'badge-available';
                const statusText = offering.status.charAt(0).toUpperCase() + offering.status.slice(1);
                
                row.innerHTML = `
                    <td>${offering.id}</td>
                    <td>${offering.program}</td>
                    <td>Year ${offering.yearLevel || 1}</td>
                    <td>${offering.term}</td>
                    <td>${offering.subjectCode} - ${offering.subjectName}</td>
                    <td>${offering.faculty}</td>
                    <td>${offering.schedule}</td>
                    <td>${offering.room}</td>
                    <td>${offering.enrolled}/${offering.capacity}</td>
                    <td><span class="badge ${statusBadge}">${statusText}</span></td>
                    <td>
                        <button class="btn btn-warning btn-sm" onclick="editOffering(${offering.id})">‚úèÔ∏è Edit</button>
                        <button class="btn btn-danger btn-sm" onclick="deleteOffering(${offering.id})">üóëÔ∏è Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });

            document.getElementById('offerings-count').textContent = offeringsData.length;
        }

        // ==================== SEARCH FUNCTION ====================
        function searchTable(tableId) {
            const input = event.target.value.toLowerCase();
            const table = document.getElementById(tableId);
            const rows = table.getElementsByTagName('tbody')[0].getElementsByTagName('tr');

            for (let row of rows) {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(input) ? '' : 'none';
            }
        }

        // ==================== NOTIFICATION ====================
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#28a745' : '#dc3545'};
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                box-shadow: 0 5px 20px rgba(0,0,0,0.3);
                z-index: 10000;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(400px); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(400px); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // ==================== PROGRAM ROADMAP ====================
        function renderProgramRoadmap() {
            const selectedProgram = document.getElementById('roadmap-program-filter').value;
            const selectedEffectivity = document.getElementById('roadmap-effectivity-filter').value;
            const container = document.getElementById('roadmap-container');
            
            // Filter curriculum by selected program and effectivity year (using range)
            const programCurriculum = curriculumData.filter(c => 
                c.program === selectedProgram && 
                isEffectiveForYear(c, selectedEffectivity) && 
                c.status === 'active'
            );
            
            if (programCurriculum.length === 0) {
                container.innerHTML = `
                    <div class="roadmap-empty">
                        <h3>No curriculum data available</h3>
                        <p>There are no curriculum records for ${selectedProgram} program with effectivity year ${selectedEffectivity}-${parseInt(selectedEffectivity)+1}.</p>
                        <p style="margin-top: 10px; font-size: 0.9em; color: #6c757d;">Try selecting a different curriculum version above.</p>
                    </div>
                `;
                return;
            }
            
            // Group by year
            const yearGroups = {};
            programCurriculum.forEach(curriculum => {
                if (!yearGroups[curriculum.year]) {
                    yearGroups[curriculum.year] = {};
                }
                if (!yearGroups[curriculum.year][curriculum.term]) {
                    yearGroups[curriculum.year][curriculum.term] = [];
                }
                yearGroups[curriculum.year][curriculum.term].push(curriculum);
            });
            
            // Sort years
            const sortedYears = Object.keys(yearGroups).sort((a, b) => parseInt(a) - parseInt(b));
            
            let html = '';
            
            sortedYears.forEach(year => {
                const terms = yearGroups[year];
                
                // Calculate year totals
                let yearTotalSubjects = 0;
                let yearTotalUnits = 0;
                Object.values(terms).forEach(subjects => {
                    yearTotalSubjects += subjects.length;
                    yearTotalUnits += subjects.reduce((sum, s) => sum + s.units, 0);
                });
                
                html += `
                    <div class="roadmap-year">
                        <div class="roadmap-year-header">
                            <h3>üìö Year ${year}</h3>
                            <div class="roadmap-year-stats">
                                <div><strong>${yearTotalSubjects}</strong> Subjects</div>
                                <div><strong>${yearTotalUnits}</strong> Total Units</div>
                            </div>
                        </div>
                        <div class="roadmap-terms">
                `;
                
                // Sort terms (1st Semester, 2nd Semester, Summer)
                const termOrder = ['1st Semester', '2nd Semester', 'Summer'];
                const sortedTerms = Object.keys(terms).sort((a, b) => {
                    return termOrder.indexOf(a) - termOrder.indexOf(b);
                });
                
                sortedTerms.forEach(term => {
                    const subjects = terms[term];
                    const termTotalUnits = subjects.reduce((sum, s) => sum + s.units, 0);
                    
                    html += `
                        <div class="roadmap-term">
                            <div class="roadmap-term-header">
                                <h4>üìñ ${term}</h4>
                                <div class="roadmap-term-info">
                                    <span><strong>${subjects.length}</strong> Subjects</span>
                                    <span><strong>${termTotalUnits}</strong> Units</span>
                                </div>
                            </div>
                            <div class="roadmap-subjects">
                    `;
                    
                    subjects.forEach(subject => {
                        html += `
                            <div class="roadmap-subject">
                                <div class="subject-code">${subject.subjectCode}</div>
                                <div class="subject-units">${subject.units} ${subject.units === 1 ? 'Unit' : 'Units'}</div>
                                <div class="subject-name">${subject.subjectName}</div>
                                <div class="subject-prereq">
                                    ${subject.prerequisites !== 'None' ? '<strong>Prereq:</strong> ' + subject.prerequisites : 'No prerequisite'}
                                </div>
                            </div>
                        `;
                    });
                    
                    html += `
                            </div>
                            <div class="roadmap-summary">
                                <span>Term Total:</span>
                                <span>${subjects.length} Subjects | ${termTotalUnits} Units</span>
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        function printRoadmap() {
            window.print();
        }

        // ==================== INITIALIZE ====================
        document.addEventListener('DOMContentLoaded', function() {
            renderCurriculumTable();
            renderOfferingsTable();
            renderProgramRoadmap();
        });
    </script>
</body>
</html>
